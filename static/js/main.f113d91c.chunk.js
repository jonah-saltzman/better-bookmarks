(this["webpackJsonpbetter-bookmarks-client"]=this["webpackJsonpbetter-bookmarks-client"]||[]).push([[0],{29:function(e,t,a){e.exports=a(44)},34:function(e,t,a){},37:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(20),o=a.n(c),l=(a(34),a(8)),s=a(50),u=a(9),i=a(17),m=a(11),d=(a(35),a(36),a(37),a(7)),p=a.n(d),f=a(13),b=a(46),E=a(47),h=a(48),g=Object(r.createContext)(),O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));console.log("isDev: ".concat(O));var x=O?"http://127.0.0.1:4000":"https://betterbookmarks.herokuapp.com",w="https://twitter.com/i/oauth2/authorize?response_type=code&client_id=YnEzOGs2Y2pLMWRUTXM2X3dYU1g6MTpjaQ&redirect_uri="+x+"/twtauth?user=",j=function(){var e=Object(f.a)(p.a.mark((function e(t,a,r,n){var c,o,l,s,u,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=x+"/auth"+(n?"/signup":"/login"),console.log("authenticating with url: "),console.log(c),o={email:t,password:a,twtId:r||null},e.prev=4,e.next=7,fetch(c,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 7:return l=e.sent,s=l.status,e.next=11,l.json();case 11:if(u=e.sent,n){e.next=16;break}return e.abrupt("return",{error:200===s?null:u,success:200===s?u.message:null,token:u.token||null,userId:u.userId||null});case 16:if(200!==s){e.next=27;break}return e.next=19,j(t,a,null,!1);case 19:if(!(i=e.sent).success){e.next=24;break}return e.abrupt("return",{error:null,success:"Account created & logged in!",token:i.token});case 24:return e.abrupt("return",{error:"User ".concat(t," created but login failed.")});case 25:e.next=28;break;case 27:return e.abrupt("return",{error:u});case 28:e.next=34;break;case 30:return e.prev=30,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",{error:"Unknown error"});case 34:case"end":return e.stop()}}),e,null,[[4,30]])})));return function(t,a,r,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,r,n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x+"/user/signout",e.prev=1,e.next=4,fetch(a,{method:"Get",cache:"no-cache",headers:{Authorization:"JWT ".concat(t)}});case 4:return r=e.sent,n=r.status,console.log("in logout, response:"),e.next=9,r.json();case 9:if(c=e.sent,console.log(c),200!==n){e.next=15;break}return e.abrupt("return",{error:null,success:c.message});case 15:return e.abrupt("return",{error:c.message});case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",{error:"Unknown error logging out."});case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(r.useContext)(g),t=e.state,a=e.dispatch,c=(t.inAuth,t.signIn,t.loggedIn),o=t.token,l=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=3;break}return Object(m.b)("No user to logout!",{type:"error"}),e.abrupt("return");case 3:return e.next=5,y(o);case 5:if(!(t=e.sent).error){e.next=9;break}return Object(m.b)(t.error,{type:"error"}),e.abrupt("return");case 9:Object(m.b)(t.success,{type:"success"}),["SET_USER","SET_LOGIN","SET_TOKEN","SET_FOLDERS","SET_USER_ID"].forEach((function(e){return a({type:e,payload:null})}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(b.a,{sticky:"top",className:"nav"},n.a.createElement(E.a,{tag:u.b,to:"/",className:"text-white navbrand"},"Better Bookmarks"),n.a.createElement(u.c,{to:"/folders",className:"text-white"},"Folders"),n.a.createElement(u.c,{to:"/likes",className:"text-white"},"Likes"),n.a.createElement(u.c,{to:"/import",className:"text-white"},"Import"),n.a.createElement(h.a,{className:"text-white float-right navtxt"},c?n.a.createElement("span",{onClick:l,className:"text-white text-large logout"},"Logout"):n.a.createElement(u.c,{className:"text-white text-large",to:"/auth"},"Login")))},v=function(){return n.a.createElement(i.a,{to:"/"})},N=a(49),S=a(51),I=a(52),T=a(53),_=a(54),C=a(55),L=a(56),R=a(57),U=function(){var e=Object(r.useContext)(g),t=e.state,a=e.dispatch,c=t.loggedIn,o=Object(r.useState)(!1),u=Object(l.a)(o,2),d=u[0],b=u[1],E=Object(r.useState)(!1),h=Object(l.a)(E,2),O=h[0],x=h[1],w=Object(r.useState)(!0),y=Object(l.a)(w,2),k=y[0],v=y[1],U=Object(r.useState)(""),z=Object(l.a)(U,2),F=z[0],G=z[1],W=Object(r.useState)(""),D=Object(l.a)(W,2),A=D[0],B=D[1],K=Object(r.useState)(""),J=Object(l.a)(K,2),M=J[0],P=J[1],Y=Object(r.useState)(""),X=Object(l.a)(Y,2),$=X[0],q=X[1],H=Object(r.useState)(!1),Q=Object(l.a)(H,2),V=Q[0],Z=Q[1],ee=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==F&&""!==A&&(k||""!==M)){e.next=4;break}return Object(m.b)("Please complete all required fields.",{type:"error"}),e.abrupt("return");case 4:if(k||A===M){e.next=7;break}return Object(m.b)("Passwords do not match!",{type:"error"}),e.abrupt("return");case 7:x(!0),b(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){d?Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(F,A,$,!k);case 2:(t=e.sent).error?Object(m.b)(t.error,{type:"error"}):(Object(m.b)(t.success,{type:"success"}),console.log("authResult:"),console.log(t),te(F,t.token,t.userId)),x(!1),b(!1);case 6:case"end":return e.stop()}}),e)})))():x(!1)}),[d]);var te=function(e,t,r){console.log("setting credentials: "),console.log(e,t,r),a({type:"SET_USER",payload:e}),a({type:"SET_TOKEN",payload:t}),a({type:"SET_LOGIN",payload:!0}),a({type:"SET_USER_ID",payload:r})};return O?n.a.createElement("div",{className:"Center"},n.a.createElement(N.a,{color:"primary"}),n.a.createElement("div",{className:"text-primary"},"Loading...")):c?n.a.createElement(i.a,{to:"/folders"}):n.a.createElement(s.a,{fluid:!0,className:"mt-5 "},n.a.createElement(S.a,null,n.a.createElement(I.a,{md:"8",className:"offset-md-2 p-3 "},n.a.createElement(T.a,{className:"formcard auth-form",onSubmit:ee},n.a.createElement(_.a,{className:"mt-4"},n.a.createElement("input",{className:"input",type:"email",name:"email",id:"email",placeholder:"Email",value:F,onChange:function(e){return G(e.target.value)}})),n.a.createElement(_.a,null,n.a.createElement("input",{className:"input mt-2",type:"password",name:"password",id:"password",value:A,onChange:function(e){return B(e.target.value)},placeholder:"Password"})),k?n.a.createElement(_.a,{check:!0,className:"mt-2"},n.a.createElement(C.a,{check:!0},n.a.createElement(L.a,{className:"checkmark",type:"checkbox",onChange:function(){Z(!V)},checked:V})," ",n.a.createElement("span",{className:"text-right",style:{color:"#f9f9f9",fontWeight:"400",letterSpacing:"1px"}},"Stay signed in"))):[n.a.createElement(_.a,{key:"password-confirm"},n.a.createElement("input",{className:"input mt-2",type:"password",name:"password-confirm",id:"password-confirm",value:M,onChange:function(e){return P(e.target.value)},placeholder:"Confirm password"})),n.a.createElement(_.a,{key:"twtId"},n.a.createElement("input",{className:"input mt-2",type:"text",name:"twtId",id:"twtId",value:$,onChange:function(e){return q(e.target.value)},placeholder:"Twitter Username"}))],n.a.createElement(R.a,{type:"submit",color:"primary",block:!0,className:"text-uppercase button mt-5",style:{padding:"15px",fontSize:"18px"}},k?"Sign in":"Register")))),n.a.createElement(S.a,null,n.a.createElement(I.a,{md:"8",className:"offset-md-8"},n.a.createElement(R.a,{onClick:function(){v(!k)},type:"button",className:"text-uppercase button-static",style:{padding:"15px",fontSize:"18px"}},k?"Register":"Sign in"))))},z=a(58),F=a(59),G=a(60),W=a(61),D=function(){var e=Object(r.useContext)(g),t=e.state,a=(e.dispatch,t.loggedIn),c=t.userId,o=Object(r.useState)(!1),s=Object(l.a)(o,2),u=s[0],i=s[1],m=Object(r.useState)(""),d=Object(l.a)(m,2),p=d[0],f=d[1];return Object(r.useEffect)((function(){a&&c&&(f(w+c+"&scope=tweet.read%20like.read&state=state&code_challenge=InSomnia&code_challenge_method=plain"),i(!0))}),[a]),n.a.createElement("div",{className:"center-home"},n.a.createElement(z.a,{className:"homecard card-fab"},n.a.createElement(F.a,null,"Welcome to Better Bookmarks"),n.a.createElement(G.a,null,n.a.createElement(W.a,null,n.a.createElement("ul",null,n.a.createElement("li",null,"Organize your favorite Tweets into folders."),n.a.createElement("li",null,"Share folders with anyone"),n.a.createElement("li",null,'No more "This Tweet has been deleted')),u?n.a.createElement("span",{onClick:function(){window.open(p)}},"Login with Twitter"):null))))},A=a(62),B=a(63),K="https://betterbookmarks.herokuapp.com",J=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K+"/user/folders",e.prev=1,e.next=4,fetch("https://betterbookmarks.herokuapp.com/user/folders",{method:"GET",cache:"no-cache",headers:{Authorization:"JWT ".concat(t)}});case 4:return a=e.sent,r=a.status,e.next=8,a.json();case 8:if(n=e.sent,200!==r){e.next=13;break}return e.abrupt("return",{error:null,folders:n.folders});case 13:return e.abrupt("return",{error:n.message});case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var r,n,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=K+"/user/folders/"+t,console.log("getonefolder URL:"),console.log(r),e.prev=3,e.next=6,fetch(r,{method:"GET",cache:"no-cache",headers:{Authorization:"JWT ".concat(a)}});case 6:return n=e.sent,c=n.status,console.log("getting one folder status: ".concat(c)),e.next=11,n.json();case 11:if(o=e.sent,200!==c){e.next=16;break}return e.abrupt("return",{error:null,tweets:o.tweets});case 16:return e.abrupt("return",{error:o.message});case 17:e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(t,a){return e.apply(this,arguments)}}(),P=a(19),Y=function(e){var t=e.folder,a=e.folderKey,c=Object(r.useContext)(g),o=(c.state,c.dispatch),l=Object(i.g)();return n.a.createElement(S.a,null,n.a.createElement(I.a,{onClick:function(){return e=a,console.log("clicked folder ".concat(e)),o({type:"SET_SINGLE_FOLDER",payload:e}),o({type:"SET_SINGLE_FOLDER_NAME",payload:t.folderName}),void l.push("/onefolder");var e},md:"10",className:"d-flex justify-content-center align-items-center text-large cardtxt",style:{fontWeight:"700",fontSize:"32px",letterSpacing:"2px"}},n.a.createElement("div",{className:"name"},t.folderName)),n.a.createElement(I.a,{md:"2",className:"d-flex justify-content-center align-items-center"},n.a.createElement("div",{className:"iconbtn mr-4 "},n.a.createElement(P.a,{onClick:function(){},color:"#FF6370",className:" icon",style:{zIndex:"1"}})),n.a.createElement("div",{className:"iconbtn mr-5",style:{marginRight:"30px"}},n.a.createElement(P.b,{className:"icon ",color:"#54eafe",onClick:function(){}})," ")))},X=function(){var e=Object(r.useContext)(g),t=e.state,a=(e.dispatch,t.loggedIn),c=t.token,o=Object(r.useState)(!0),u=Object(l.a)(o,2),d=u[0],b=u[1],E=Object(r.useState)(!1),h=Object(l.a)(E,2),O=h[0],x=h[1],w=Object(r.useState)([]),j=Object(l.a)(w,2),y=j[0],k=j[1];return Object(r.useEffect)((function(){O||a&&Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(c);case 2:if(!(t=e.sent).error){e.next=8;break}return Object(m.b)("Error: ".concat(t.error)),x(!0),b(!1),e.abrupt("return");case 8:t.folders&&(console.log("got folders: "),console.log(t.folders),k(t.folders),x(!0),b(!1));case 9:case"end":return e.stop()}}),e)})))()}),[O]),a?d?n.a.createElement("div",{className:"Center"},n.a.createElement(N.a,{color:"primary"}),n.a.createElement("div",{className:"text-primary"},"Loading...")):(console.log("rendering folders: "),console.log(y),n.a.createElement(s.a,{className:"mt-4 mb-5 folder-list"},0!==y.length||d?n.a.createElement(A.a,null,y.map((function(e){return n.a.createElement(B.a,{key:e.folderId,className:"listcard mt-4"},n.a.createElement(Y,{folder:e,folderKey:e.folderId}))}))):n.a.createElement("div",{className:"Center text-large cardtxt",style:{fontWeight:"700",fontSize:"32px",letterSpacing:"2px"}},"No folders found!"))):n.a.createElement(i.a,{to:"/auth"})},$=a(28),q=function(e){var t=e.tweet,a=(e.tweetKey,e.embed,Object(r.useContext)(g));a.state,a.dispatch,Object(i.g)();return n.a.createElement(S.a,null,n.a.createElement(I.a,{md:"10",className:"d-flex justify-content-center align-items-center text-large cardtxt",style:{fontWeight:"700",fontSize:"32px",letterSpacing:"2px"}},n.a.createElement("div",{className:"tweet"},t.twtText)),n.a.createElement(I.a,{md:"2",className:"d-flex justify-content-center align-items-center"},n.a.createElement("div",{className:"iconbtn"},n.a.createElement(P.a,{onClick:function(){},color:"#FF6370",className:" icon",style:{zIndex:"1"}}))))},H=function(){var e=Object(r.useContext)(g),t=e.state,a=(e.dispatch,Object(i.g)()),c=t.folder,o=t.folderName,u=t.loggedIn,d=t.token,b=Object(r.useState)(!0),E=Object(l.a)(b,2),h=E[0],O=E[1],x=Object(r.useState)(!0),w=Object(l.a)(x,2),j=w[0],y=w[1],k=Object(r.useState)([]),v=Object(l.a)(k,2),T=v[0],_=v[1],C=Object(r.useState)(!0),L=Object(l.a)(C,2),R=L[0];L[1];Object(r.useEffect)((function(){j&&c&&u&&Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(c,d);case 2:if(!(t=e.sent).error){e.next=8;break}return Object(m.b)("Error: ".concat(t.error)),y(!1),O(!1),e.abrupt("return");case 8:t.tweets&&(console.log("got tweets: "),console.log(t.tweets),_(t.tweets),y(!1),O(!1));case 9:case"end":return e.stop()}}),e)})))()}));return u?h?n.a.createElement("div",{className:"Center"},n.a.createElement(N.a,{color:"primary"}),n.a.createElement("div",{className:"text-primary"},"Loading...")):(console.log("rendering tweets: "),console.log(T),n.a.createElement(n.a.Fragment,null," ",n.a.createElement(s.a,{className:"tweetcard"},n.a.createElement(S.a,null,n.a.createElement(I.a,{md:"2"},n.a.createElement("div",{className:"icon",onClick:function(){a.push("/folders")}},n.a.createElement($.a,{size:22,className:" text-white"}))),n.a.createElement(I.a,{md:"8"},n.a.createElement("div",{className:"folderName"},o)),n.a.createElement(I.a,{md:"2"}))),n.a.createElement(s.a,{scrollable:!0,className:"mt-4 mb-5 tweet-list"},0!==T.length||h?n.a.createElement(A.a,null,T.map((function(e){return n.a.createElement(B.a,{key:e.twtId,className:"tweetcard mb-4"},n.a.createElement(q,{embed:R,tweet:e,tweetKey:e.twtId}))}))):n.a.createElement("div",{className:"Center text-large cardtxt",style:{fontWeight:"700",fontSize:"32px",letterSpacing:"2px"}},"No Tweets (yet)!")))):n.a.createElement(i.a,{to:"/auth"})},Q=a(10),V=function(e,t){switch(t.type){case"SET_USER_ID":return null===t.payload?Object(Q.a)({},e,{userId:null}):Object(Q.a)({},e,{userId:t.payload});case"SET_SINGLE_FOLDER_NAME":return Object(Q.a)({},e,{folderName:t.payload});case"SET_SINGLE_FOLDER":return Object(Q.a)({},e,{folder:t.payload});case"SET_PREV_USER":return null===t.payload?Object(Q.a)({},e,{prevUser:null}):Object(Q.a)({},e,{prevUser:t.payload});case"SET_SHOW_LOGOUT":return Object(Q.a)({},e,{showLogout:t.payload});case"RESET_SIGNIN":return Object(Q.a)({},e,{signIn:!0});case"SET_FOLDERS":return null===t.payload?Object(Q.a)({},e,{folders:[]}):Object(Q.a)({},e,{folders:t.payload});case"SET_LOGIN":return null===t.payload?Object(Q.a)({},e,{loggedIn:!1}):Object(Q.a)({},e,{loggedIn:t.payload});case"SET_USER":return null===t.payload?Object(Q.a)({},e,{user:null}):Object(Q.a)({},e,{user:t.payload});case"SET_TOKEN":return null===t.payload||!1===t.payload?Object(Q.a)({},e,{token:null}):Object(Q.a)({},e,{token:t.payload});default:return e}},Z={showLogout:!1,inAuth:!1,loggedIn:!1,twtAuth:{authed:!1,twtId:null,twtToken:null,twtSecret:null},user:null,userId:null,prevUser:null,token:null,folders:[],folder:{},folerName:null,folderToUpdate:null,folderIdToUpdate:null},ee=function(){return window.close(),n.a.createElement(n.a.Fragment,null)},te=function(){var e=Object(r.useReducer)(V,Z),t=Object(l.a)(e,2),a=t[0],c=t[1];return n.a.createElement(u.a,{basename:"better-bookmarks"},n.a.createElement(g.Provider,{value:{state:a,dispatch:c}},n.a.createElement(m.a,{theme:"dark"}),n.a.createElement(k,null),n.a.createElement(s.a,{className:"h-75"},n.a.createElement(i.d,null,n.a.createElement(i.b,{exact:!0,path:"/auth",component:U}),n.a.createElement(i.b,{exact:!0,path:"/folders",component:X}),n.a.createElement(i.b,{exact:!0,path:"/onefolder",component:H}),n.a.createElement(i.b,{exact:!0,path:"/close",component:ee}),n.a.createElement(i.b,{exact:!0,path:"/",component:D}),n.a.createElement(i.b,{exact:!0,path:"*",component:v})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.f113d91c.chunk.js.map